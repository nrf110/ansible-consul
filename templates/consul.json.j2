{
{% if consul_acl_datacenter is defined %}
  "acl_datacenter": "{{ consul_acl_datacenter }}",
{% endif %}
{% if consul_acl_default_policy is defined %}
  "acl_default_policy": "{{ consul_acl_default_policy }}",
{% endif %}
{% if consul_acl_down_policy is defined %}
  "acl_down_policy": "{{ consul_acl_down_policy }}",
{% endif %}
{% if consul_acl_agent_master_token is defined %}
  "acl_agent_master_token": "{{ consul_acl_agent_master_token }}",
{% endif %}
{% if consul_acl_agent_token is defined %}
  "acl_agent_token": "{{ consul_acl_agent_token }}",
{% endif %}
  "acl_enforce_version_8": {{ consul_acl_enforce_version_8|default('false') }},
{% if consul_acl_master_token is defined %}
  "acl_master_token": "{{ consul_acl_master_token }}",
{% endif %}
{% if consul_acl_replication_token is defined %}
  "acl_replication_token": "{{ consul_acl_replication_token }}",
{% endif %}
{% if consul_acl_token is defined %}
  "acl_token": "{{ consul_acl_token }}",
{% endif %}
{% if consul_acl_ttl is defined %}
  "acl_ttl": "{{ consul_acl_ttl }}",
{% endif %}
{% if consul_addresses is defined %}
  "addresses": {{ consul_addresses|to_nice_json }},
{% endif %}
{% if consul_advertise_address is defined %}
  "advertise_addr": "{{ consul_advertise_address }}",
{% endif %}
{% if consul_advertise_wan_address is defined %}
  "advertise_addr_wan": "{{ consul_advertise_wan_address }}",
{% endif %}
{% if consul_advertise_addresses is defined %}
  "advertise_addrs": {{ consul_advertise_addresses|to_nice_json }},
{% endif %}
{% if consul_atlas_infrastructure is defined %}
{% if consul_atlas_acl_token is defined %}
  "atlas_acl_token": "{{ consul_atlas_acl_token }}",
{% endif %}
{% if consul_atlas_join|default(False) %}
  "atlas_join": true,
{% endif %}
{% if consul_atlas_token is defined %}
  "atlas_token": "{{ consul_atlas_token }}",
{% endif %}
  "atlas_infrastructure": "{{ consul_atlas_infrastructure }}",
{% endif %}
{% if not consul_autopilot_cleanup_dead_servers|default(True) %}"
  "autopilot": {
    "cleanup_dead_servers": false
  },
{% endif %}
{% if consul_bootstrap_expect is defined %}
  "bootstrap_expect": {{ consul_bootstrap_expect }},
{% endif %}
{% if consul_bind_addr is defined %}
  "bind_addr": "{{ consul_bind_addr }}",
{% endif %}
{% if consul_tls_ca_file is defined %}
  "ca_file": "{{ consul_tls_ca_file }}",
{% endif %}
{% if consul_tls_cert_file is defined and consul_tls_key_file is defined %}
  "cert_file": "{{ consul_tls_cert_file }}",
  "key_file": "{{ consul_tls_key_file }}",
{% endif %}
{% if consul_verify_incoming|default(False) %}
  "verify_incoming": true,
{% endif %}
{% if consul_verify_server_hostname|default(False) or consul_verify_outgoing|default(False) %}
  "verify_outgoing": true,
{% endif %}
{% if consul_verify_server_hostname is defined %}
  "verify_server_hostname": "{{ consul_verify_server_hostname }}",
{% endif %}
{% if consul_check_update_interval is defined %}
  "check_update_interval": "{{ consul_check_update_interval }}",
{% endif %}
{% if consul_client_addr is defined %}
  "client_addr": "{{ consul_client_addr }}",
{% endif %}
{% if consul_datacenter is defined %}
  "datacenter": "{{ consul_datacenter }}",
{% endif %}
  "data_dir": "{{ consul_data_dir }}",
{% if consul_disable_anonymous_signature|default(False) %}
  "disable_anonymous_signature": true,
{% endif %}
{% if consul_disable_remote_exec|default(False) %}
  "disable_remote_exec": true,
{% endif %}
{% if consul_disable_update_check|default(False) %}
  "disable_update_check": true,
{% endif %}
{% if consul_dns_config is defined %}
  "dns_config": {{ consul_dns_config|to_nice_json }},
{% endif %}
{% if consul_domain is defined %}
  "domain": "{{ consul_domain }}",
{% endif %}
{% if consul_enable_debug|default(False) %}
  "enable_debug": true,
{% endif %}
{% if consul_enable_syslog|default(False) %}
  "enable_syslog": true,
{% if consul_syslog_facility is defined %}
  "syslog_facility": "{{ consul_syslog_facility }}",
{% endif %}
{% endif %}
{% if consul_encrypt is defined %}
  "encrypt": "{{ consul_encrypt }}",
{% endif %}
{% if consul_http_api_response_headers is defined %}
  "http_api_response_headers": {{ consul_http_api_response_headers|to_nice_json }},
{% endif %}
{% if consul_leave_on_terminate is defined %}
  "leave_on_terminate": {{ consul_leave_on_terminate }},
{% endif %}
{% if consul_log_level is defined %}
  "log_level": "{{ consul_log_level }}",
{% endif %}
{% if consul_node_id is defined %}
  "node_id": "{{ consul_node_id }}",
{% endif %}
{% if consul_node_name is defined %}
  "node_name": "{{ consul_node_name }}",
{% endif %}
{% if consul_node_meta is defined %}
  "node_meta": {{ consul_node_meta|to_nice_json }},
{% endif %}
{% if consul_performance is defined %}
  "performance": {{ consul_performance|to_nice_json }},
{% endif %}
{% if consul_protocol is defined %}
  "protocol": "{{ consul_protocol }}",
{% endif %}
{% if consul_raft_protocol is defined %}
  "raft_protocol": {{ consul_raft_protocol }},
{% endif %}
{% if consul_reconnect_timeout is defined %}
  "reconnect_timeout": "{{ consul_reconnect_timeout }}",
{% endif %}
{% if consul_reconnect_timeout_wan is defined %}
  "reconnect_timeout_wan": "{{ consul_reconnect_timeout_wan }}",
{% endif %}
{% if consul_recursors is defined %}
  "recursors": {{ consul_recursors|to_nice_json }},
{% endif %}
{% if consul_rejoin_after_leave|default(False) %}
  "rejoin_after_leave": true,
{% endif %}
{% if consul_retry_join is defined %}
  "retry_join": {{ consul_retry_join|to_nice_json }},
{% endif %}
{% if consul_retry_join_ec2 is defined %}
  "retry_join_ec2": {{ consul_retry_join_ec2|to_nice_json }},
{% endif %}
{% if consul_retry_join_gce is defined %}
  "retry_join_gce": {{ consul_retry_join_gce|to_nice_json }},
{% endif %}
{% if consul_retry_interval is defined %}
  "retry_interval": "{{ consul_retry_interval }}",
{% endif %}
{% if consul_retry_join_wan is defined %}
  "retry_join_wan": {{ consul_retry_join_wan|to_nice_json }},
{% endif %}
{% if consul_retry_interval_wan is defined %}
  "retry_interval_wan": "{{ consul_retry_interval_wan }}",
{% endif %}
{% if consul_serf_lan_bind is defined %}
  "serf_lan_bind": "{{ consul_serf_lan_bind }}"
{% endif %}
{% if consul_server_name is defined %}
  "server_name": "{{ consul_server_name }}",
{% endif %}
{% if consul_session_ttl_min is defined %}
  "session_ttl_min": "{{ consul_session_ttl_min }}",
{% endif %}
{% if consul_skip_leave_on_interrupt is defined %}
  "skip_leave_on_interrupt": {{ consul_skip_leave_on_interrupt }},
{% endif %}
{% if consul_start_join is defined %}
  "start_join": {{ consul_start_join|to_nice_json }},
{% endif %}
{% if consul_start_join_wan is defined %}
  "start_join_wan": {{ consul_start_join_wan|to_nice_json }},
{% endif %}
{% if consul_telemetry is defined %}
  "telemetry": {{ consul_telemetry|to_nice_json }},
{% endif %}
{% if consul_translate_wan_addresses|default(False) %}
  "translate_wan_addresses": true,
{% endif %}
{% if consul_unix_sockets is defined %}
  "unix_sockets": {{ consul_unix_sockets|to_nice_json }},
{% endif %}
{% if consul_watches is defined %}
  "watches": {{ consul_watches|to_nice_json }},
{% endif %}
  "ports": {{ consul_ports|to_nice_json }},
  "server": {{ consul_is_server|to_json }},
  "tls_min_version": "{{ consul_tls_min_version|default('tls12')}}",
  "ui": true
}
